<view class="page">
  <!-- Recipe Header Card -->
  <view class="card glass recipe-header-card">
    <view class="recipe-header-row">
      <view class="recipe-image-container">
        <image class="recipe-image" src="{{recipe.image}}" mode="aspectFill"></image>
      </view>
      <view class="recipe-info-compact">
        <view class="recipe-title h2">{{recipe.title_en || recipe.name}}</view>
        <view class="recipe-description text">{{recipe.description || recipe.cautions_en}}</view>
        
        <view class="meta-row">
          <view class="meta-compact">
            <text class="meta-icon">â±ï¸</text>
            <text class="meta-value">{{recipe.prepTime}}min</text>
          </view>
          <view class="meta-compact">
            <text class="meta-icon">ğŸ³</text>
            <text class="meta-value">{{recipe.cookTime}}min</text>
          </view>
          <view class="meta-compact">
            <text class="meta-icon">ğŸ“Š</text>
            <text class="meta-value">{{recipe.difficulty}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- Action buttons positioned at bottom left -->
    <view class="action-buttons-bottom-left">
      <button class="action-btn-small favorite-btn {{isFavorited ? 'active' : ''}}" bindtap="addToFavorites">
        <text>{{isFavorited ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      </button>
      <button class="action-btn-small share-btn">
        <text>ğŸ“¤</text>
      </button>
    </view>
  </view>

  <!-- Nutrition & Ingredients Card -->
  <view class="card glass nutrition-ingredients-card">
    <view class="section-header">
      <view class="h2">ğŸ¥— Nutrition & Ingredients</view>
    </view>
    
    <!-- Nutrition Info -->
    <view class="nutrition-inline" wx:if="{{recipe.nutrition}}">
      <view class="nutrition-compact" wx:for="{{recipe.nutrition}}" wx:key="name">
        <text class="nutrition-icon">{{item.icon}}</text>
        <text class="nutrition-value">{{item.value}}{{item.unit}}</text>
      </view>
    </view>
    
    <!-- Ingredients Grid -->
    <view class="ingredients-compact">
      <view class="ing-compact" wx:for="{{recipe.ingredients}}" wx:key="name">
        <text class="ing-icon">ğŸ¥˜</text>
        <text class="ing-name">{{item.name}}</text>
        <text class="ing-amount">{{item.amount}}</text>
      </view>
    </view>
  </view>

  <!-- Cooking Steps & Tips Card -->
  <view class="card glass steps-tips-card">
    <view class="section-header">
      <view class="h2">ğŸ‘¨â€ğŸ³ Cooking Steps</view>
    </view>
    
    <view class="steps-compact">
      <view class="step-compact" wx:for="{{recipe.steps}}" wx:key="index">
        <view class="step-number-compact">{{index + 1}}</view>
        <view class="step-content-compact">
          <view class="step-text-compact">{{item}}</view>
        </view>
      </view>
    </view>
    
    <!-- Tips Section -->
    <view class="tips-compact" wx:if="{{recipe.cautions_en}}">
      <view class="tips-header">ğŸ’¡ Important Tips</view>
      <view class="tip-compact">
        <text class="tip-icon">âš ï¸</text>
        <text class="tip-text">{{recipe.cautions_en}}</text>
      </view>
    </view>
  </view>

  <!-- Fixed Bottom Action Button -->
  <buy-button class="btn-primary" text="ğŸ›’ Buy All Ingredients" type="primary" url="/pages/BuyPage/BuyPage"></buy-button>
</view>